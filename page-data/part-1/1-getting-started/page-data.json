{"componentChunkName":"component---src-templates-course-content-template-js","path":"/part-1/1-getting-started","result":{"data":{"page":{"htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"This green box"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Is general stuff about things in general"}]}]},{"type":"element","tagName":"exercise","properties":{"name":"This blue box"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Is something you can actually do"}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Academisque definitions"},"children":[{"type":"element","tagName":"h1","properties":{"id":"what-is-devops","style":"position:relative;"},"children":[{"type":"text","value":"What is DevOps?"},{"type":"element","tagName":"a","properties":{"href":"#what-is-devops","ariaLabel":"what is devops permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Before we get started with Docker let's lay the groundwork for learning the right mindset. Defining DevOps is not a trivial task but the term itself consists of two parts, "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Dev"}]},{"type":"text","value":" and "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Ops"}]},{"type":"text","value":". "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Dev"}]},{"type":"text","value":" refers to the development of software and "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Ops"}]},{"type":"text","value":" to operations. Simple definition for DevOps would be that it means the release, configuring, and monitoring of software is in the hands of the very people who develop it."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A more formal definition is offered by "},{"type":"element","tagName":"a","properties":{"href":"https://dl.acm.org/citation.cfm?id=2962707","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Jabbari et al."}]},{"type":"text","value":": \"DevOps is a development methodology aimed at bridging the gap between Development and Operations, emphasizing communication and collaboration, continuous integration, quality assurance and delivery with automated deployment utilizing a set of development practices\"."}]},{"type":"element","tagName":"img","properties":{"src":"https://upload.wikimedia.org/wikipedia/commons/0/05/Devops-toolchain.svg"},"children":[]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Image of DevOps toolchain by Kharnagy from "},{"type":"element","tagName":"a","properties":{"href":"https://commons.wikimedia.org/wiki/File:Devops-toolchain.svg","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"wikipedia"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Sometimes"}]},{"type":"text","value":" DevOps is regarded as a role that one person or a team can fill. Here's some external motivation to learn DevOps skills: "},{"type":"element","tagName":"a","properties":{"href":"https://insights.stackoverflow.com/survey/2020#work-salary-and-experience-by-developer-type","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Salary by Developer Type in StackOverflow survey"}]},{"type":"text","value":". You will not become a DevOps specialist solely from this course, but you will get the skills to help you navigate in the increasingly containerized world."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"During this course we will focus mainly on the packaging, releasing and configuring of the applications. You will not be asked to plan or create new software. We will go over Docker and a few technologies that you may see in your daily life."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://turnoff.us/geek/devops-explained","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"DevOps is not a role"}]}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Docker"},"children":[{"type":"element","tagName":"h1","properties":{"id":"what-is-docker","style":"position:relative;"},"children":[{"type":"text","value":"What is Docker?"},{"type":"element","tagName":"a","properties":{"href":"#what-is-docker","ariaLabel":"what is docker permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.docker.com","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://www.docker.com"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://jpetazzo.github.io/2017/02/24/from-dotcloud-to-docker/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://jpetazzo.github.io/2017/02/24/from-dotcloud-to-docker/"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.youtube.com/watch?v=wW9CAH9nSLs","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://www.youtube.com/watch?v=wW9CAH9nSLs"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"/docker.pdf"},"children":[{"type":"text","value":"/docker.pdf"}]}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"\"Docker is a set of platform as a service (PaaS) products that use OS-level virtualization to deliver software in packages called containers.\" - "},{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/Docker_(software)","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"from Wikipedia"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So stripping the jargon we get two definitions:"}]},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Docker is a set of tools to deliver software in containers."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Containers are packages of software WITH dependencies."}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 631px; margin-bottom: 1rem;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/6ec65bc81fa5c52af7e93008d5196f98/4597d/container.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 49.130434782608695%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9ElEQVQoz41Q7YqEMAz0/Z9OiuIKov8EEdTWr7bWzjGFHu6eyxkInZDJJNNEKeXWdYWU0i/Lgmtu24au69A0Deq6Rtu2IPfKYT1NE+Z5htYaibXWee/Z9Gxaa2GMCUlMUqyJr/3IoaBzDozEGONYUPA4DnwGl3E7lxHfhZQyCD8WHMcxDJ3n+VxwnmfPP7uzRCFyPntXy2+CHFBK+WEY+IaNT5N8Ooju3izHj72z/e3//ljWWjuq80JaiPaYxOz1fR+SOPavLy/kLJcmAMJZ1trvJ/wT+77/4qQoCleWJYQQXgiBPM+RZdnjJD9NU7xeL1RVhR81JQY8r7dRzwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"picture","properties":{},"children":[{"type":"text","value":"\n          "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/6ec65bc81fa5c52af7e93008d5196f98/a0b58/container.webp 230w","/static/6ec65bc81fa5c52af7e93008d5196f98/bc10c/container.webp 460w","/static/6ec65bc81fa5c52af7e93008d5196f98/d3d2f/container.webp 631w"],"sizes":"(max-width: 631px) 100vw, 631px","type":"image/webp"},"children":[]},{"type":"text","value":"\n          "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/6ec65bc81fa5c52af7e93008d5196f98/81c8e/container.png 230w","/static/6ec65bc81fa5c52af7e93008d5196f98/08a84/container.png 460w","/static/6ec65bc81fa5c52af7e93008d5196f98/4597d/container.png 631w"],"sizes":"(max-width: 631px) 100vw, 631px","type":"image/png"},"children":[]},{"type":"text","value":"\n          "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"src":"/static/6ec65bc81fa5c52af7e93008d5196f98/4597d/container.png","alt":"container","title":"container","loading":"lazy","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"},"children":[]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The above image illustrates how containers include the application and its dependencies. These containers are isolated so that they don't interfere with each other or the software running outside of the containers. In case you need to interact with them or enable interactions between them, Docker offers tools to do so."}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Why"},"children":[{"type":"element","tagName":"h2","properties":{"id":"benefits-from-containers","style":"position:relative;"},"children":[{"type":"text","value":"Benefits from containers"},{"type":"element","tagName":"a","properties":{"href":"#benefits-from-containers","ariaLabel":"benefits from containers permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Containers package applications. Sounds simple, right? To illustrate the potential benefits let's talk about different scenarios."}]},{"type":"element","tagName":"h3","properties":{"id":"scenario-1-works-on-my-machine","style":"position:relative;"},"children":[{"type":"text","value":"Scenario 1: Works on my machine"},{"type":"element","tagName":"a","properties":{"href":"#scenario-1-works-on-my-machine","ariaLabel":"scenario 1 works on my machine permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's first take a closer look into what happens in web development without containers following the chain above starting from \"Plan\"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First you plan an application. Then your team of 1-n developers create the software. It works on your computer. It may even go through a testing pipeline working perfectly. You send it to the server and..."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"...it does not work."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This is known as the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"\"works on my machine\""}]},{"type":"text","value":" problem. The only way to solve this is by finding out what in tarnation the developer had installed on their machine that made the application work."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Containers solve this problem by allowing the developer to personally run the application inside a container, which then includes all of the dependencies required for the app to work."}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"You may still occasionally hear about \"works in my "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"container"}]},{"type":"text","value":"\" issues - these are often just usage errors."}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"h3","properties":{"id":"scenario-2-isolated-environments","style":"position:relative;"},"children":[{"type":"text","value":"Scenario 2: Isolated environments"},{"type":"element","tagName":"a","properties":{"href":"#scenario-2-isolated-environments","ariaLabel":"scenario 2 isolated environments permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You have 5 different Python applications. You need to deploy them to a server that already has an application requiring Python 2.7 and of course none of your applications are 2.7. What do you do?"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Since containers package the software with all of its dependencies, you package the existing app and all 5 new ones with their respective python versions and that's it."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I can only imagine the disaster that would result if you try to run them side by side on the same machine without isolating the environments. It sounds more like a time bomb. Sometimes different parts of a system may change over time, possibly leading to the application not working. These changes may be anything from an operating system update to changes in dependencies."}]},{"type":"element","tagName":"h3","properties":{"id":"scenario-3-development","style":"position:relative;"},"children":[{"type":"text","value":"Scenario 3: Development"},{"type":"element","tagName":"a","properties":{"href":"#scenario-3-development","ariaLabel":"scenario 3 development permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You are brought into a dev team. They run a web app that uses other services when running: a postgres database, mongodb, redis and a number of others. Simple enough, you install whatever is required to run the application and all of the applications that it depends on..."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"What a headache to start installing and then managing the development databases on your own machine."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Thankfully, by the time you are told to do that you are already a docker expert. With one command you get an isolated application, like postgres or mongo, running in your machine."}]},{"type":"element","tagName":"h3","properties":{"id":"scenario-4-scaling","style":"position:relative;"},"children":[{"type":"text","value":"Scenario 4: Scaling"},{"type":"element","tagName":"a","properties":{"href":"#scenario-4-scaling","ariaLabel":"scenario 4 scaling permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Starting and stopping a docker container has little overhead. But when you run your own Netflix or Facebook, you want to meet the changing demand. With some advanced tooling that we will learn about in parts 2 and 3, we can spin up multiple containers instantly and load balance traffic between them."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Container orchestration will be discussed in parts 2 and 3. But the simplest example: what happens when one application dies? The orchestration system notices it, splits traffic between the working replicas, and spins up a new container to replace the dead one."}]},{"type":"element","tagName":"h2","properties":{"id":"virtual-machines","style":"position:relative;"},"children":[{"type":"text","value":"Virtual machines"},{"type":"element","tagName":"a","properties":{"href":"#virtual-machines","ariaLabel":"virtual machines permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Isn't there already a solution for this? Virtual Machines are not the same as Containers - they solve different problems. We will not be looking into Virtual Machines in this course. However, here's a diagram to give you a rough idea of the difference."}]},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 781px; margin-bottom: 1rem;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/774514d8c4e314ac6483e9a50697af13/7fee5/docker-explained-3.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 61.73913043478261%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACYklEQVQoz4WPu27UQBSGLaXgFSioqUDiDShoeABqOh4CEYkmoUGiQSLLZhMuEgWJKKCAhkuyEEECtmdsr1EIq2R3M/baG8+ML4rXM7M+yGZXokjIkT6dOf98mouGiDFne3jO8tCcVfcZf2fbw+cc39bMwx+3HN8C27fA8W3QD37ATncbbA+DU2cWYGIeaIgYmu1hzfKQZvtYc0NHc4ZWPVvTvHL0wc4N7KEB9pCDPeRud7+5X39tuYiYLvZQB3tozyT6u+rmeUzMe4gYC5iYi5aPFrFnLmJiVCwgYtzf7H44Twi5NGLh8xELl0YsbLCENnjKGkd81BjRcOmIjVb80LtdvQA6Q6cGHyLYcr+A0dOhEzjT3IZ29+PVjGc3YVpKKaCUQRRRyPN8FsM4HzPN6H1/gPpGy+zrTbOnN/HAbKK+Ua9R33hs9vRnG3vvL/gD/3IURS+iKGoyxpY558uzTmnUpJQ+HQbDeS0/zlE5KX9O1MStyJLMFYVwy0nplqp0pJCHPvGvBEFwXQhBpJROkiRuFEUupbSmKIqOUup3mqZvtSzLQillLITgFXEc83yccyklF1JEhSggCIKLlNJr1VellFGWZZxSymdVFAVTSh2nabqjBUHwiDG2QiltMcZacRzXvZo55y3f91c7nc6d3d3du4SQJzMnTdNWkiQ1U3+VUvqwOvAl53ydMbbGGFv/lyoPw3Btf3//Ta/Xex0EwdrUPYlq75WWpuknKeVnIUT7JKSUbQDYAIBNpVT7NG+GNh6P4axKkgTiOIayLM90tTzPCwCYlGWpTkNKqYQQ6n/OjD9GSUGd0xmjVQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"picture","properties":{},"children":[{"type":"text","value":"\n          "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/774514d8c4e314ac6483e9a50697af13/a0b58/docker-explained-3.webp 230w","/static/774514d8c4e314ac6483e9a50697af13/bc10c/docker-explained-3.webp 460w","/static/774514d8c4e314ac6483e9a50697af13/42cfc/docker-explained-3.webp 781w"],"sizes":"(max-width: 781px) 100vw, 781px","type":"image/webp"},"children":[]},{"type":"text","value":"\n          "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/774514d8c4e314ac6483e9a50697af13/81c8e/docker-explained-3.png 230w","/static/774514d8c4e314ac6483e9a50697af13/08a84/docker-explained-3.png 460w","/static/774514d8c4e314ac6483e9a50697af13/7fee5/docker-explained-3.png 781w"],"sizes":"(max-width: 781px) 100vw, 781px","type":"image/png"},"children":[]},{"type":"text","value":"\n          "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"src":"/static/774514d8c4e314ac6483e9a50697af13/7fee5/docker-explained-3.png","alt":"docker explained 3","title":"docker explained 3","loading":"lazy","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"},"children":[]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The difference between a virtual machine and docker solutions arises after moving Application A to an incompatible system \"Operating System B\". Running software on top of containers is almost as efficient as running it \"natively\" outside containers, at least when compared to virtual machines."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So containers have a direct access to your own Operating Systems kernel and resources. The resource usage overhead of using containers is minimized, as the applications behave as if there were no extra layers. As Docker is using Linux kernels, Mac and Windows can't run it without a few hoops and each have their own solutions on how to run Docker."}]}]},{"type":"element","tagName":"h2","properties":{"id":"docker-cli-basics","style":"position:relative;"},"children":[{"type":"text","value":"Docker CLI basics"},{"type":"element","tagName":"a","properties":{"href":"#docker-cli-basics","ariaLabel":"docker cli basics permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Docker CLI is usually referenced as the \"docker engine\", see docs at "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/engine/reference/commandline/cli/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://docs.docker.com/engine/reference/commandline/cli/"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The commmand "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker"}]},{"type":"text","value":" has plenty of sub commands that are given when you just run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker"}]}]},{"type":"element","tagName":"exercise","properties":{"name":"docker info"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's see what's happening in our docker environment by running"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"docker info"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Running this gives us information from our docker daemon (server) and from this info we can see our current server version"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"...\nServer Version: 25.0.2\n..."}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"and that we have something like"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"...\nCPUs: 5\nTotal Memory: 7.667GiB\n..."}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"available for our containers. On Linux these numbers will match the host machine, but on Mac/Win this will be the number of the CPUs/RAM in the virtual machine (\"hidden\" inside of docker)"}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Mac/Windows only"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Before moving forward, you might want to change the defaults: On a Mac open the Docker preferences from the top menu icon. And on Windows right-click the icon on the task tray."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then, under \"Resources\" increase/decrease the number of CPUs and memory. If you don't know what to put here it's okay, now you'll know where to find these settings later."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you change something and hit "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Apply & Restart"}]},{"type":"text","value":". Then while the internal hidden magic virtual machine is restarting the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker info"}]},{"type":"text","value":" will return:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"...\nServer:\nERROR: Error response from daemon: Bad response from Docker engine\nerrors pretty printing info"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Which means that the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker"}]},{"type":"text","value":" command (which is in your Mac/Windows) can not connect to the docker daemon (which is in the magic virtual machine hidden inside of Docker Desktop)."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After the machine has restarted, we can see that the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker info"}]},{"type":"text","value":" will match with our settings."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"My first container"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You already have Docker installed so let's run our first container!"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The hello-world is a simple application that outputs \"Hello from Docker!\" and some additional info."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Simply run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container run hello-world"}]},{"type":"text","value":", the output will be the following:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container run hello-world\n  Unable to find image 'hello-world:latest' locally\n  latest: Pulling from library/hello-world\n  478afc919002: Pull complete\n  Digest: sha256:4bd78111b6914a99dbc560e6a20eab57ff6655aea4a80c50b0c5491968cbc2e6\n  Status: Downloaded newer image for hello-world:latest\n\n  Hello from Docker!\n  This message shows that your installation appears to be working correctly.\n\n  To generate this message, Docker took the following steps:\n  1. The Docker client contacted the Docker daemon.\n  2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub.\n      (arm64v8)\n  3. The Docker daemon created a new container from that image which runs the\n      executable that produces the output you are currently reading.\n  4. The Docker daemon streamed that output to the Docker client, which sent it\n      to your terminal.\n\n  To try something more ambitious, you can run an Ubuntu container with:\n  $ docker run -it ubuntu bash\n\n  Share images, automate workflows, and more with a free Docker ID:\n  https://hub.docker.com/\n\n  For more examples and ideas, visit:\n  https://docs.docker.com/get-started/"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you already ran hello-world previously it will skip the first 5 lines. The first 5 lines tell that an "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"image"}]},{"type":"text","value":" \"hello-world:latest\" wasn't found and it was downloaded. Try it again:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container run hello-world\n\n  Hello from Docker!\n..."}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It found the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"image"}]},{"type":"text","value":" locally so it skipped right to running the hello-world."}]}]},{"type":"element","tagName":"text-box","properties":{"name":"Security reminder: Downloading from the internet","variant":"hint"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Keep in mind that we are downloading stuff from the internet. Double checking what you're running is always a good idea."}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"So what's an image?"},"children":[{"type":"element","tagName":"h2","properties":{"id":"image-and-containers","style":"position:relative;"},"children":[{"type":"text","value":"Image and containers"},{"type":"element","tagName":"a","properties":{"href":"#image-and-containers","ariaLabel":"image and containers permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Since we already know what containers are it's easier to explain images through them: Containers are instances of images. A basic mistake is to confuse images and containers."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Cooking metaphor:"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Image is pre-cooked, frozen treat."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Container is the delicious treat."}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"With the cooking metaphor, the difficult task is creating the frozen treat while warming it up is relatively easy. Images require some work and knowledge to be created, but when you know how to create images you can leverage the power of containers in your own projects."}]},{"type":"element","tagName":"h2","properties":{"id":"image","style":"position:relative;"},"children":[{"type":"text","value":"Image"},{"type":"element","tagName":"a","properties":{"href":"#image","ariaLabel":"image permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A Docker image is a file. An image never changes; you can not edit an existing file. Creating a new image happens by starting from a base image and adding new "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"layers"}]},{"type":"text","value":" to it. We will talk about layers later, but you should think of images as "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"immutable"}]},{"type":"text","value":", they can not be changed after they are created."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"docker image ls"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"List all your images with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker image ls"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker image ls\n  REPOSITORY    TAG       IMAGE ID       CREATED        SIZE\n  hello-world   latest    ee301c921b8a   9 months ago   9.14kB"}]}]}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"From image to containerS"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Containers are created from images, so when we ran hello-world twice we downloaded one "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"image"}]},{"type":"text","value":" and created two of them from the single image."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Well then, if images are used to create containers, where do images come from? This image file is built from an instructional file named "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":" that is parsed when you run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker image build"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Dockerfile is a file named Dockerfile, that looks something like this"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Dockerfile"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"dockerfile"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-dockerfile"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-dockerfile"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" <image"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"<tag"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"RUN"}]},{"type":"text","value":" <install some dependencies"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"CMD"}]},{"type":"text","value":" <command that is executed on `docker container run`"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"and is the instruction set for building an image. We will look into Dockerfiles later when we get to build our own image."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If we go back to the cooking metaphor, "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Dockerfile is the recipe."}]}]},{"type":"element","tagName":"h2","properties":{"id":"container","style":"position:relative;"},"children":[{"type":"text","value":"Container"},{"type":"element","tagName":"a","properties":{"href":"#container","ariaLabel":"container permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Containers only contain that which is required to execute an application; and you can start, stop and interact with them. They are "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"isolated"}]},{"type":"text","value":" environments in the host machine with the ability to interact with each other and the host machine itself via defined methods (TCP/UDP)."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"List containers"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"List all your containers with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container ls"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container ls\n  CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And we get back nothing! Luckily for every "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker"}]},{"type":"text","value":" subcommand there is additional help available:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container ls --help\n\nUsage:  docker container ls [OPTIONS]\n\nList containers\n\nAliases:\n  ls, ps, list\n\nOptions:\n  -a, --all             Show all containers (default shows just running)\n  -f, --filter filter   Filter output based on conditions provided\n      --format string   Pretty-print containers using a Go template\n  -n, --last int        Show n last created containers (includes all states) (default -1)\n  -l, --latest          Show the latest created container (includes all states)\n      --no-trunc        Don't truncate output\n  -q, --quiet           Only display container IDs\n  -s, --size            Display total file sizes"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"From this list we'll learn that without the flag "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--all"}]},{"type":"text","value":" (or "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-a"}]},{"type":"text","value":") it will only print the running containers and the hello-worlds we ran have already exited. So let's add "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-a"}]},{"type":"text","value":":"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container ls -a\n  CONTAINER ID   IMAGE         COMMAND    CREATED         STATUS                     PORTS     NAMES\n  8103afbd2352   hello-world   \"/hello\"   2 seconds ago   Exited (0) 1 second ago              cranky_bartik\n  48c3d11acdc7   hello-world   \"/hello\"   7 minutes ago   Exited (0) 7 minutes ago             nifty_mclean"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And now we'll see the exited containers."}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Docker CLI basics"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We are using the command line to interact with the \"Docker Engine\" that is made up of 3 parts: CLI, a REST API and docker daemon. When you run a command, e.g. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container run"}]},{"type":"text","value":", behind the scenes the client sends a request through the REST API to the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"docker daemon"}]},{"type":"text","value":" which takes care of images, containers and other resources."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can read the "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/engine/reference/commandline/cli/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"docs for more information"}]},{"type":"text","value":". But even though you will find over 50 commands in the documentation, only a handful of them is needed for general use. There's a list of the most commonly used basic commands at the end of this section."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"One of them is already familiar: "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container run <image>"}]},{"type":"text","value":", which instructs daemon to create a container from the image and downloading the image if it is not available."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"docker image rm"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's remove the image since we will not need it anymore, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker image rm hello-world"}]},{"type":"text","value":" sounds about right. However, this should fail with the following error:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker image rm hello-world\n  Error response from daemon: conflict: unable to remove repository reference \"hello-world\" (must force) - container <container ID> is using its referenced image <image ID>"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This means that a container that was created from the image "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"hello-world"}]},{"type":"text","value":" still exists and that removing "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"hello-world"}]},{"type":"text","value":" could have consequences. So before removing images, you should have the referencing container removed first."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container ls -a"}]},{"type":"text","value":" to list all containers again."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container ls -a\n  CONTAINER ID   IMAGE           COMMAND        CREATED          STATUS                      PORTS     NAMES\n  b7a53260b513   hello-world     \"/hello\"       35 minutes ago   Exited (0) 35 minutes ago             brave_bhabha\n  1cd4cb01482d   hello-world     \"/hello\"       41 minutes ago   Exited (0) 41 minutes ago             vibrant_bell"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Notice that containers have a "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"CONTAINER ID"}]},{"type":"text","value":" and "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"NAME"}]},{"type":"text","value":". The names are currently autogenerated. When we have a lot of different containers, we can use the option"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--filter"}]},{"type":"text","value":" or pipe to "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"grep"}]},{"type":"text","value":" (or another similar utility) to filter the list."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's start with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--filter"}]},{"type":"text","value":" - you can see the possible filters from "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/engine/reference/commandline/ps/#filtering","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://docs.docker.com/engine/reference/commandline/ps/#filtering"}]},{"type":"text","value":" - and you may notice that the filters are under "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ps"}]},{"type":"text","value":" which is the historical shorthand for "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"container ls"}]},{"type":"text","value":" which is confusing. More on the shorthands later."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Anyway, by specifying "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--filter ancestor=hello-world"}]},{"type":"text","value":" we'll list all the containers that share "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hello-world"}]},{"type":"text","value":" as an "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"ancestor"}]},{"type":"text","value":":"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"docker container ls -a --filter ancestor=hello-world"}]}]}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"just use grep (or windows equivalent)"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"But going forward it's probably easier to just use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"grep"}]},{"type":"text","value":" than remember these non-intuitive filter options."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"docker container ls -a | grep hello-world"}]}]}]}]},{"type":"element","tagName":"exercise","properties":{"name":"docker container rm for real"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's remove the container with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container rm"}]},{"type":"text","value":" command. It accepts a container's name or ID as its arguments."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Notice that the command also works with the first few characters of an ID. For example, if a container's ID is 3d4bab29dd67, you can use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container rm 3d"}]},{"type":"text","value":" to delete it. Using the shorthand for the ID will not delete multiple containers, so if you have two IDs starting with 3d, a warning will be printed, and neither will be deleted."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can also use multiple arguments: "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container rm id1 id2 id3"}]},{"type":"text","value":". This is especially handy when combined with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"xargs"}]},{"type":"text","value":", but before we can use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"xargs"}]},{"type":"text","value":" we need to list just the plain ids."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To list the plain ids docker uses "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--quiet"}]},{"type":"text","value":" or "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-q"}]},{"type":"text","value":" (which is not very "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"quiet"}]},{"type":"text","value":"..)."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container ls -a -q\n  1cd4cb01482d\n  b7a53260b513"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you already removed the containers and have no output, then you might want to run a couple of more:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container run hello-world\n...\n$ docker container run hello-world\n..."}]}]}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"xargs (on Linux/Mac)"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now this output is great for "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"xargs"}]},{"type":"text","value":"! If you don't see any output, check that your have that "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-a"}]},{"type":"text","value":" in there as well."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container ls -a -q | xargs docker container rm\n  1cd4cb01482d\n  b7a53260b513"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container rm"}]},{"type":"text","value":" returns the ids it removed. If you run the command again it will not list any containers and therefore "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"xargs"}]},{"type":"text","value":" does not run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container rm"}]},{"type":"text","value":", either"}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"prune"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you have hundreds of stopped containers and you wish to delete them all, you should use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container prune"}]},{"type":"text","value":". Prune can also be used to remove \"dangling\" images with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker image prune"}]},{"type":"text","value":". Dangling images are images that do not have a name and are not used. They can be created manually and are automatically generated during build. Removing them just saves some space."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And finally you can use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker system prune"}]},{"type":"text","value":" to clear almost everything. We aren't yet familiar with the exceptions that "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker system prune"}]},{"type":"text","value":" does not remove."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After removing all of the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"hello-world"}]},{"type":"text","value":" containers, run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker image rm hello-world"}]},{"type":"text","value":" to delete the image. You can use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker image ls"}]},{"type":"text","value":" to confirm that the image is not listed."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"docker image pull"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can also use the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"image pull"}]},{"type":"text","value":" command to download images without running them: "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker image pull hello-world"}]}]}]},{"type":"element","tagName":"exercise","properties":{"name":"docker image tag/version"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's try starting a new container "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"with"}]},{"type":"text","value":" a version specified:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"docker container run nginx:1.15.7"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"With some containers the command line appears to freeze after pulling and starting the container. This is because that particular container is now running in the current terminal, blocking the input. You can observe this with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container ls"}]},{"type":"text","value":" from another terminal. In this situation one can exit by pressing "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"control + c"}]},{"type":"text","value":" and try again with the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-d"}]},{"type":"text","value":" flag."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container run -d nginx:1.15.7\n  c7749cf989f61353c1d433466d9ed6c45458291106e8131391af972c287fb0e5"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-d"}]},{"type":"text","value":" flag starts a container "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"detached"}]},{"type":"text","value":", meaning that it runs in the background. The container can be seen with"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container ls\n  CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES\n  c7749cf989f6        nginx               \"nginx -g 'daemon of…\"   35 seconds ago      Up 34 seconds       80/tcp              blissful_wright"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now if we try to remove it, it will fail:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container rm blissful_wright\n  Error response from daemon: You cannot remove a running container c7749cf989f61353c1d433466d9ed6c45458291106e8131391af972c287fb0e5. Stop the container before attempting removal or force remove"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We should first stop the container using "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container stop blissful_wright"}]},{"type":"text","value":", and then use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"rm"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Forcing is also a possibility and we can use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container rm --force blissful_wright"}]},{"type":"text","value":" safely in this case. Again for both of them instead of name we could have used the ID or parts of it, e.g. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"c77"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It's common for the docker daemon to become clogged over time with old images and containers."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now if we run the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nginx"}]},{"type":"text","value":" image without specifying the version:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker container run nginx\n  Unable to find image 'nginx:latest' locally\n  latest: Pulling from library/nginx\n  dd6189d6fc13: Already exists\n  45b405c6807d: Already exists\n  0885cedf6b8e: Already exists\n  5ef23c5804a6: Already exists\n  31f35a1c1556: Already exists\n  2b1ef5bc2771: Already exists\n  Digest: sha256:943c25b4b66b332184d5ba6bb18234273551593016c0e0ae906bab111548239f\n  Status: Downloaded newer image for nginx:latest\n  /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration\n  /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/\n  /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh\n  10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf\n  10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf\n  /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh\n  /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh\n  /docker-entrypoint.sh: Configuration complete; ready for start up\n  2022/11/08 11:20:58 [notice] 1#1: using the \"epoll\" event method\n  2022/11/08 11:20:58 [notice] 1#1: nginx/1.23.2\n  2022/11/08 11:20:58 [notice] 1#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6)\n  2022/11/08 11:20:58 [notice] 1#1: OS: Linux 5.10.104-linuxkit\n  2022/11/08 11:20:58 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576\n  2022/11/08 11:20:58 [notice] 1#1: start worker processes\n  2022/11/08 11:20:58 [notice] 1#1: start worker process 32\n  2022/11/08 11:20:58 [notice] 1#1: start worker process 33\n  2022/11/08 11:20:58 [notice] 1#1: start worker process 34\n  2022/11/08 11:20:58 [notice] 1#1: start worker process 35"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We can see that it automatically adds "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":":latest"}]},{"type":"text","value":" as the version, which is the image last built (not necessarily the latest version of nginx. More on this later.)"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And the container doesn't seem to be as stuck as the one created from "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nginx:1.15.7"}]},{"type":"text","value":" because it outputs a bunch of logs. Actually, the container behavior is exactly the same in both "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":":latest"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":":1.15.7"}]},{"type":"text","value":" - the level of output verbosity of "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nginx"}]},{"type":"text","value":" image was changed in 1.19.0 "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/docker-library/docs/pull/1735/files","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://github.com/docker-library/docs/pull/1735/files"}]},{"type":"text","value":" and our "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":":latest"}]},{"type":"text","value":" is newer than that. However, we'll learn later why "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":":latest"}]},{"type":"text","value":" might not be as "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":":latest"}]},{"type":"text","value":" as you think."}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Most used commands"},"children":[{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"command"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"explain"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"shorthand"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker image ls"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Lists all images"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker images"}]}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker image rm <image>"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Removes an image"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker rmi"}]}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker image pull <image>"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Pulls image from a docker registry"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker pull"}]}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container ls -a"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Lists all containers"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker ps -a"}]}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container run <image>"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Runs a container from an image"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker run"}]}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container rm <container>"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Removes a container"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker rm"}]}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container stop <container>"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Stops a container"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker stop"}]}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker container exec <container>"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Executes a command inside the container "}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker exec"}]}]}]}]}]},{"type":"element","tagName":"div","properties":{},"children":[{"type":"text","value":"For all of them container can be either the container id or the container name. Same for images. "},{"type":"element","tagName":"b","properties":{},"children":[{"type":"text","value":"In the future we may use the shorthands in the material."}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Some of the shorthands are legacy version of doing the same thing. You can use either."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 1.1: Getting started"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Since we already did \"Hello, World!\" in the material let's do something else."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Start 3 containers from image that does not automatically exit, such as nginx, detached."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Stop 2 of the containers leaving 1 up."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Submit the output for "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker ps -a"}]},{"type":"text","value":" which shows 2 stopped containers and one running."}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Mac/Windows only part 2"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"While the user is not expected/required ever to go inside of this magical virtual machine, we, as brave container specialists can do so by using docker (huh)."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now just blindly copy/paste the following without thinking too much. It will make a lot more sense later."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ docker run -it --rm --privileged --pid=host justincormack/nsenter1\n  Unable to find image 'justincormack/nsenter1:latest' locally\n  latest: Pulling from justincormack/nsenter1\n  726619a9fa8c: Pull complete\n  Digest: sha256:e876f694a4cb6ff9e6861197ea3680fe2e3c5ab773a1e37ca1f13171f7f5798e\n  Status: Downloaded newer image for justincormack/nsenter1:latest\n/ #"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then we can see how long the virtual machine has been running"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"/ # uptime\n 10:18:14 up 2 min,  load average: 0.02, 0.02, 0.00"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And what version of Linux we are running"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"/ # uname -a\n  Linux docker-desktop 5.15.49-linuxkit #1 SMP PREEMPT Tue Sep 13 07:51:32 UTC 2022 aarch64 Linux\n/ # cat /etc/os-release\n  PRETTY_NAME=\"Docker Desktop\""}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So, Docker Desktop ships with a virtual machine based on "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/linuxkit/linuxkit","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"LinuxKit"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As the output above is from my Apple Silicon Mac, the architecture is "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"aarch64"}]},{"type":"text","value":" (ARM) also for our magical Linux virtual machine. On a older Intel based Mac the architecture would be "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"x86"}]},{"type":"text","value":". More on these architecture implications later."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 1.2: Cleanup"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We've left containers and a image that won't be used anymore and are taking space, as "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker ps -as"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker images"}]},{"type":"text","value":" will reveal."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Clean the docker daemon from all images and containers."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Submit the output for "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker ps -a"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker images"}]}]}]},{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"How"},"children":[{"type":"element","tagName":"h2","properties":{"id":"links","style":"position:relative;"},"children":[{"type":"text","value":"Links"},{"type":"element","tagName":"a","properties":{"href":"#links","ariaLabel":"links permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://nickjanetakis.com/blog/understanding-how-the-docker-daemon-and-docker-cli-work-together","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Understanding how the docker daemon and docker cli work together."}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://cameronlonsdale.com/2018/11/26/whats-in-a-docker-image","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"What is a Docker image?"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}]}]},"html":"<div><text-box variant='learningObjectives' name='This green box'><p>Is general stuff about things in general</p></text-box><exercise name='This blue box'><p>Is something you can actually do</p></exercise><text-box variant='learningObjectives' name='Academisque definitions'><h1 id=\"what-is-devops\" style=\"position:relative;\">What is DevOps?<a href=\"#what-is-devops\" aria-label=\"what is devops permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1><p>Before we get started with Docker let's lay the groundwork for learning the right mindset. Defining DevOps is not a trivial task but the term itself consists of two parts, <em>Dev</em> and <em>Ops</em>. <em>Dev</em> refers to the development of software and <em>Ops</em> to operations. Simple definition for DevOps would be that it means the release, configuring, and monitoring of software is in the hands of the very people who develop it.</p><p>A more formal definition is offered by <a href=\"https://dl.acm.org/citation.cfm?id=2962707\" target=\"_blank\" rel=\"noopener noreferrer\">Jabbari et al.</a>: \"DevOps is a development methodology aimed at bridging the gap between Development and Operations, emphasizing communication and collaboration, continuous integration, quality assurance and delivery with automated deployment utilizing a set of development practices\".</p><img src=\"https://upload.wikimedia.org/wikipedia/commons/0/05/Devops-toolchain.svg\"><p>Image of DevOps toolchain by Kharnagy from <a href=\"https://commons.wikimedia.org/wiki/File:Devops-toolchain.svg\" target=\"_blank\" rel=\"noopener noreferrer\">wikipedia</a></p><p><em>Sometimes</em> DevOps is regarded as a role that one person or a team can fill. Here's some external motivation to learn DevOps skills: <a href=\"https://insights.stackoverflow.com/survey/2020#work-salary-and-experience-by-developer-type\" target=\"_blank\" rel=\"noopener noreferrer\">Salary by Developer Type in StackOverflow survey</a>. You will not become a DevOps specialist solely from this course, but you will get the skills to help you navigate in the increasingly containerized world.</p><p>During this course we will focus mainly on the packaging, releasing and configuring of the applications. You will not be asked to plan or create new software. We will go over Docker and a few technologies that you may see in your daily life.</p><p><a href=\"http://turnoff.us/geek/devops-explained\" target=\"_blank\" rel=\"noopener noreferrer\">DevOps is not a role</a></p></text-box><text-box variant='learningObjectives' name='Docker'><h1 id=\"what-is-docker\" style=\"position:relative;\">What is Docker?<a href=\"#what-is-docker\" aria-label=\"what is docker permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1><ul>\n<li><a href=\"https://www.docker.com\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.docker.com</a></li>\n<li><a href=\"https://jpetazzo.github.io/2017/02/24/from-dotcloud-to-docker/\" target=\"_blank\" rel=\"noopener noreferrer\">https://jpetazzo.github.io/2017/02/24/from-dotcloud-to-docker/</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=wW9CAH9nSLs\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.youtube.com/watch?v=wW9CAH9nSLs</a></li>\n<li><a href=\"/docker.pdf\">/docker.pdf</a></li>\n</ul><p>\"Docker is a set of platform as a service (PaaS) products that use OS-level virtualization to deliver software in packages called containers.\" - <a href=\"https://en.wikipedia.org/wiki/Docker_(software)\" target=\"_blank\" rel=\"noopener noreferrer\">from Wikipedia</a>.</p><p>So stripping the jargon we get two definitions:</p><ol>\n<li>Docker is a set of tools to deliver software in containers.</li>\n<li>Containers are packages of software WITH dependencies.</li>\n</ol><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 631px; margin-bottom: 1rem;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/6ec65bc81fa5c52af7e93008d5196f98/4597d/container.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 49.130434782608695%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9ElEQVQoz41Q7YqEMAz0/Z9OiuIKov8EEdTWr7bWzjGFHu6eyxkInZDJJNNEKeXWdYWU0i/Lgmtu24au69A0Deq6Rtu2IPfKYT1NE+Z5htYaibXWee/Z9Gxaa2GMCUlMUqyJr/3IoaBzDozEGONYUPA4DnwGl3E7lxHfhZQyCD8WHMcxDJ3n+VxwnmfPP7uzRCFyPntXy2+CHFBK+WEY+IaNT5N8Ooju3izHj72z/e3//ljWWjuq80JaiPaYxOz1fR+SOPavLy/kLJcmAMJZ1trvJ/wT+77/4qQoCleWJYQQXgiBPM+RZdnjJD9NU7xeL1RVhR81JQY8r7dRzwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/6ec65bc81fa5c52af7e93008d5196f98/a0b58/container.webp 230w,\n/static/6ec65bc81fa5c52af7e93008d5196f98/bc10c/container.webp 460w,\n/static/6ec65bc81fa5c52af7e93008d5196f98/d3d2f/container.webp 631w\" sizes=\"(max-width: 631px) 100vw, 631px\" type=\"image/webp\">\n          <source srcset=\"/static/6ec65bc81fa5c52af7e93008d5196f98/81c8e/container.png 230w,\n/static/6ec65bc81fa5c52af7e93008d5196f98/08a84/container.png 460w,\n/static/6ec65bc81fa5c52af7e93008d5196f98/4597d/container.png 631w\" sizes=\"(max-width: 631px) 100vw, 631px\" type=\"image/png\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/6ec65bc81fa5c52af7e93008d5196f98/4597d/container.png\" alt=\"container\" title=\"container\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span><p>The above image illustrates how containers include the application and its dependencies. These containers are isolated so that they don't interfere with each other or the software running outside of the containers. In case you need to interact with them or enable interactions between them, Docker offers tools to do so.</p></text-box><text-box variant='learningObjectives' name='Why'><h2 id=\"benefits-from-containers\" style=\"position:relative;\">Benefits from containers<a href=\"#benefits-from-containers\" aria-label=\"benefits from containers permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><p>Containers package applications. Sounds simple, right? To illustrate the potential benefits let's talk about different scenarios.</p><h3 id=\"scenario-1-works-on-my-machine\" style=\"position:relative;\">Scenario 1: Works on my machine<a href=\"#scenario-1-works-on-my-machine\" aria-label=\"scenario 1 works on my machine permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p>Let's first take a closer look into what happens in web development without containers following the chain above starting from \"Plan\".</p><p>First you plan an application. Then your team of 1-n developers create the software. It works on your computer. It may even go through a testing pipeline working perfectly. You send it to the server and...</p><p>...it does not work.</p><p>This is known as the <strong>\"works on my machine\"</strong> problem. The only way to solve this is by finding out what in tarnation the developer had installed on their machine that made the application work.</p><p>Containers solve this problem by allowing the developer to personally run the application inside a container, which then includes all of the dependencies required for the app to work.</p><ul>\n<li>You may still occasionally hear about \"works in my <strong>container</strong>\" issues - these are often just usage errors.</li>\n</ul><h3 id=\"scenario-2-isolated-environments\" style=\"position:relative;\">Scenario 2: Isolated environments<a href=\"#scenario-2-isolated-environments\" aria-label=\"scenario 2 isolated environments permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p>You have 5 different Python applications. You need to deploy them to a server that already has an application requiring Python 2.7 and of course none of your applications are 2.7. What do you do?</p><p>Since containers package the software with all of its dependencies, you package the existing app and all 5 new ones with their respective python versions and that's it.</p><p>I can only imagine the disaster that would result if you try to run them side by side on the same machine without isolating the environments. It sounds more like a time bomb. Sometimes different parts of a system may change over time, possibly leading to the application not working. These changes may be anything from an operating system update to changes in dependencies.</p><h3 id=\"scenario-3-development\" style=\"position:relative;\">Scenario 3: Development<a href=\"#scenario-3-development\" aria-label=\"scenario 3 development permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p>You are brought into a dev team. They run a web app that uses other services when running: a postgres database, mongodb, redis and a number of others. Simple enough, you install whatever is required to run the application and all of the applications that it depends on...</p><p>What a headache to start installing and then managing the development databases on your own machine.</p><p>Thankfully, by the time you are told to do that you are already a docker expert. With one command you get an isolated application, like postgres or mongo, running in your machine.</p><h3 id=\"scenario-4-scaling\" style=\"position:relative;\">Scenario 4: Scaling<a href=\"#scenario-4-scaling\" aria-label=\"scenario 4 scaling permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p>Starting and stopping a docker container has little overhead. But when you run your own Netflix or Facebook, you want to meet the changing demand. With some advanced tooling that we will learn about in parts 2 and 3, we can spin up multiple containers instantly and load balance traffic between them.</p><p>Container orchestration will be discussed in parts 2 and 3. But the simplest example: what happens when one application dies? The orchestration system notices it, splits traffic between the working replicas, and spins up a new container to replace the dead one.</p><h2 id=\"virtual-machines\" style=\"position:relative;\">Virtual machines<a href=\"#virtual-machines\" aria-label=\"virtual machines permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><p>Isn't there already a solution for this? Virtual Machines are not the same as Containers - they solve different problems. We will not be looking into Virtual Machines in this course. However, here's a diagram to give you a rough idea of the difference.</p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 781px; margin-bottom: 1rem;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/774514d8c4e314ac6483e9a50697af13/7fee5/docker-explained-3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.73913043478261%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACYklEQVQoz4WPu27UQBSGLaXgFSioqUDiDShoeABqOh4CEYkmoUGiQSLLZhMuEgWJKKCAhkuyEEECtmdsr1EIq2R3M/baG8+ML4rXM7M+yGZXokjIkT6dOf98mouGiDFne3jO8tCcVfcZf2fbw+cc39bMwx+3HN8C27fA8W3QD37ATncbbA+DU2cWYGIeaIgYmu1hzfKQZvtYc0NHc4ZWPVvTvHL0wc4N7KEB9pCDPeRud7+5X39tuYiYLvZQB3tozyT6u+rmeUzMe4gYC5iYi5aPFrFnLmJiVCwgYtzf7H44Twi5NGLh8xELl0YsbLCENnjKGkd81BjRcOmIjVb80LtdvQA6Q6cGHyLYcr+A0dOhEzjT3IZ29+PVjGc3YVpKKaCUQRRRyPN8FsM4HzPN6H1/gPpGy+zrTbOnN/HAbKK+Ua9R33hs9vRnG3vvL/gD/3IURS+iKGoyxpY558uzTmnUpJQ+HQbDeS0/zlE5KX9O1MStyJLMFYVwy0nplqp0pJCHPvGvBEFwXQhBpJROkiRuFEUupbSmKIqOUup3mqZvtSzLQillLITgFXEc83yccyklF1JEhSggCIKLlNJr1VellFGWZZxSymdVFAVTSh2nabqjBUHwiDG2QiltMcZacRzXvZo55y3f91c7nc6d3d3du4SQJzMnTdNWkiQ1U3+VUvqwOvAl53ydMbbGGFv/lyoPw3Btf3//Ta/Xex0EwdrUPYlq75WWpuknKeVnIUT7JKSUbQDYAIBNpVT7NG+GNh6P4axKkgTiOIayLM90tTzPCwCYlGWpTkNKqYQQ6n/OjD9GSUGd0xmjVQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/774514d8c4e314ac6483e9a50697af13/a0b58/docker-explained-3.webp 230w,\n/static/774514d8c4e314ac6483e9a50697af13/bc10c/docker-explained-3.webp 460w,\n/static/774514d8c4e314ac6483e9a50697af13/42cfc/docker-explained-3.webp 781w\" sizes=\"(max-width: 781px) 100vw, 781px\" type=\"image/webp\">\n          <source srcset=\"/static/774514d8c4e314ac6483e9a50697af13/81c8e/docker-explained-3.png 230w,\n/static/774514d8c4e314ac6483e9a50697af13/08a84/docker-explained-3.png 460w,\n/static/774514d8c4e314ac6483e9a50697af13/7fee5/docker-explained-3.png 781w\" sizes=\"(max-width: 781px) 100vw, 781px\" type=\"image/png\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/774514d8c4e314ac6483e9a50697af13/7fee5/docker-explained-3.png\" alt=\"docker explained 3\" title=\"docker explained 3\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span><p>The difference between a virtual machine and docker solutions arises after moving Application A to an incompatible system \"Operating System B\". Running software on top of containers is almost as efficient as running it \"natively\" outside containers, at least when compared to virtual machines.</p><p>So containers have a direct access to your own Operating Systems kernel and resources. The resource usage overhead of using containers is minimized, as the applications behave as if there were no extra layers. As Docker is using Linux kernels, Mac and Windows can't run it without a few hoops and each have their own solutions on how to run Docker.</p></text-box><h2 id=\"docker-cli-basics\" style=\"position:relative;\">Docker CLI basics<a href=\"#docker-cli-basics\" aria-label=\"docker cli basics permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><p>The Docker CLI is usually referenced as the \"docker engine\", see docs at <a href=\"https://docs.docker.com/engine/reference/commandline/cli/\" target=\"_blank\" rel=\"noopener noreferrer\">https://docs.docker.com/engine/reference/commandline/cli/</a></p><p>The commmand <code class=\"language-text\">docker</code> has plenty of sub commands that are given when you just run <code class=\"language-text\">docker</code></p><exercise name='docker info'><p>Let's see what's happening in our docker environment by running</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">docker info</code></pre></div><p>Running this gives us information from our docker daemon (server) and from this info we can see our current server version</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">...\nServer Version: 25.0.2\n...</code></pre></div><p>and that we have something like</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">...\nCPUs: 5\nTotal Memory: 7.667GiB\n...</code></pre></div><p>available for our containers. On Linux these numbers will match the host machine, but on Mac/Win this will be the number of the CPUs/RAM in the virtual machine (\"hidden\" inside of docker)</p></exercise><text-box variant='learningObjectives' name='Mac/Windows only'><p>Before moving forward, you might want to change the defaults: On a Mac open the Docker preferences from the top menu icon. And on Windows right-click the icon on the task tray.</p><p>Then, under \"Resources\" increase/decrease the number of CPUs and memory. If you don't know what to put here it's okay, now you'll know where to find these settings later.</p><p>If you change something and hit <code class=\"language-text\">Apply &amp; Restart</code>. Then while the internal hidden magic virtual machine is restarting the <code class=\"language-text\">docker info</code> will return:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">...\nServer:\nERROR: Error response from daemon: Bad response from Docker engine\nerrors pretty printing info</code></pre></div><p>Which means that the <code class=\"language-text\">docker</code> command (which is in your Mac/Windows) can not connect to the docker daemon (which is in the magic virtual machine hidden inside of Docker Desktop).</p><p>After the machine has restarted, we can see that the <code class=\"language-text\">docker info</code> will match with our settings.</p></text-box><exercise name='My first container'><p>You already have Docker installed so let's run our first container!</p><p>The hello-world is a simple application that outputs \"Hello from Docker!\" and some additional info.</p><p>Simply run <code class=\"language-text\">docker container run hello-world</code>, the output will be the following:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container run hello-world\n  Unable to find image &#39;hello-world:latest&#39; locally\n  latest: Pulling from library/hello-world\n  478afc919002: Pull complete\n  Digest: sha256:4bd78111b6914a99dbc560e6a20eab57ff6655aea4a80c50b0c5491968cbc2e6\n  Status: Downloaded newer image for hello-world:latest\n\n  Hello from Docker!\n  This message shows that your installation appears to be working correctly.\n\n  To generate this message, Docker took the following steps:\n  1. The Docker client contacted the Docker daemon.\n  2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.\n      (arm64v8)\n  3. The Docker daemon created a new container from that image which runs the\n      executable that produces the output you are currently reading.\n  4. The Docker daemon streamed that output to the Docker client, which sent it\n      to your terminal.\n\n  To try something more ambitious, you can run an Ubuntu container with:\n  $ docker run -it ubuntu bash\n\n  Share images, automate workflows, and more with a free Docker ID:\n  https://hub.docker.com/\n\n  For more examples and ideas, visit:\n  https://docs.docker.com/get-started/</code></pre></div><p>If you already ran hello-world previously it will skip the first 5 lines. The first 5 lines tell that an <strong>image</strong> \"hello-world:latest\" wasn't found and it was downloaded. Try it again:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container run hello-world\n\n  Hello from Docker!\n...</code></pre></div><p>It found the <strong>image</strong> locally so it skipped right to running the hello-world.</p></exercise><text-box name=\"Security reminder: Downloading from the internet\" variant=\"hint\"><p>Keep in mind that we are downloading stuff from the internet. Double checking what you're running is always a good idea.</p></text-box><text-box variant='learningObjectives' name=\"So what's an image?\"><h2 id=\"image-and-containers\" style=\"position:relative;\">Image and containers<a href=\"#image-and-containers\" aria-label=\"image and containers permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><p>Since we already know what containers are it's easier to explain images through them: Containers are instances of images. A basic mistake is to confuse images and containers.</p><p>Cooking metaphor:</p><ul>\n<li>Image is pre-cooked, frozen treat.</li>\n<li>Container is the delicious treat.</li>\n</ul><p>With the cooking metaphor, the difficult task is creating the frozen treat while warming it up is relatively easy. Images require some work and knowledge to be created, but when you know how to create images you can leverage the power of containers in your own projects.</p><h2 id=\"image\" style=\"position:relative;\">Image<a href=\"#image\" aria-label=\"image permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><p>A Docker image is a file. An image never changes; you can not edit an existing file. Creating a new image happens by starting from a base image and adding new <strong>layers</strong> to it. We will talk about layers later, but you should think of images as <em>immutable</em>, they can not be changed after they are created.</p></text-box><exercise name='docker image ls'><p>List all your images with <code class=\"language-text\">docker image ls</code></p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker image ls\n  REPOSITORY    TAG       IMAGE ID       CREATED        SIZE\n  hello-world   latest    ee301c921b8a   9 months ago   9.14kB</code></pre></div></exercise><text-box variant='learningObjectives' name='From image to containerS'><p>Containers are created from images, so when we ran hello-world twice we downloaded one <em>image</em> and created two of them from the single image.</p><p>Well then, if images are used to create containers, where do images come from? This image file is built from an instructional file named <strong>Dockerfile</strong> that is parsed when you run <code class=\"language-text\">docker image build</code>.</p><p>Dockerfile is a file named Dockerfile, that looks something like this</p><p><strong>Dockerfile</strong></p><div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token keyword\">FROM</span> &lt;image<span class=\"token punctuation\">></span><span class=\"token punctuation\">:</span>&lt;tag<span class=\"token punctuation\">></span>\n\n<span class=\"token keyword\">RUN</span> &lt;install some dependencies<span class=\"token punctuation\">></span>\n\n<span class=\"token keyword\">CMD</span> &lt;command that is executed on `docker container run`<span class=\"token punctuation\">></span></code></pre></div><p>and is the instruction set for building an image. We will look into Dockerfiles later when we get to build our own image.</p><p>If we go back to the cooking metaphor, <strong>Dockerfile is the recipe.</strong></p><h2 id=\"container\" style=\"position:relative;\">Container<a href=\"#container\" aria-label=\"container permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><p>Containers only contain that which is required to execute an application; and you can start, stop and interact with them. They are <strong>isolated</strong> environments in the host machine with the ability to interact with each other and the host machine itself via defined methods (TCP/UDP).</p></text-box><exercise name='List containers'><p>List all your containers with <code class=\"language-text\">docker container ls</code></p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container ls\n  CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</code></pre></div><p>And we get back nothing! Luckily for every <code class=\"language-text\">docker</code> subcommand there is additional help available:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container ls --help\n\nUsage:  docker container ls [OPTIONS]\n\nList containers\n\nAliases:\n  ls, ps, list\n\nOptions:\n  -a, --all             Show all containers (default shows just running)\n  -f, --filter filter   Filter output based on conditions provided\n      --format string   Pretty-print containers using a Go template\n  -n, --last int        Show n last created containers (includes all states) (default -1)\n  -l, --latest          Show the latest created container (includes all states)\n      --no-trunc        Don&#39;t truncate output\n  -q, --quiet           Only display container IDs\n  -s, --size            Display total file sizes</code></pre></div><p>From this list we'll learn that without the flag <code class=\"language-text\">--all</code> (or <code class=\"language-text\">-a</code>) it will only print the running containers and the hello-worlds we ran have already exited. So let's add <code class=\"language-text\">-a</code>:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container ls -a\n  CONTAINER ID   IMAGE         COMMAND    CREATED         STATUS                     PORTS     NAMES\n  8103afbd2352   hello-world   &quot;/hello&quot;   2 seconds ago   Exited (0) 1 second ago              cranky_bartik\n  48c3d11acdc7   hello-world   &quot;/hello&quot;   7 minutes ago   Exited (0) 7 minutes ago             nifty_mclean</code></pre></div><p>And now we'll see the exited containers.</p></exercise><text-box variant='learningObjectives' name='Docker CLI basics'><p>We are using the command line to interact with the \"Docker Engine\" that is made up of 3 parts: CLI, a REST API and docker daemon. When you run a command, e.g. <code class=\"language-text\">docker container run</code>, behind the scenes the client sends a request through the REST API to the <strong>docker daemon</strong> which takes care of images, containers and other resources.</p><p>You can read the <a href=\"https://docs.docker.com/engine/reference/commandline/cli/\" target=\"_blank\" rel=\"noopener noreferrer\">docs for more information</a>. But even though you will find over 50 commands in the documentation, only a handful of them is needed for general use. There's a list of the most commonly used basic commands at the end of this section.</p><p>One of them is already familiar: <code class=\"language-text\">docker container run &lt;image&gt;</code>, which instructs daemon to create a container from the image and downloading the image if it is not available.</p></text-box><exercise name='docker image rm'><p>Let's remove the image since we will not need it anymore, <code class=\"language-text\">docker image rm hello-world</code> sounds about right. However, this should fail with the following error:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker image rm hello-world\n  Error response from daemon: conflict: unable to remove repository reference &quot;hello-world&quot; (must force) - container &lt;container ID&gt; is using its referenced image &lt;image ID&gt;</code></pre></div><p>This means that a container that was created from the image <em>hello-world</em> still exists and that removing <em>hello-world</em> could have consequences. So before removing images, you should have the referencing container removed first.</p><p>Run <code class=\"language-text\">docker container ls -a</code> to list all containers again.</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container ls -a\n  CONTAINER ID   IMAGE           COMMAND        CREATED          STATUS                      PORTS     NAMES\n  b7a53260b513   hello-world     &quot;/hello&quot;       35 minutes ago   Exited (0) 35 minutes ago             brave_bhabha\n  1cd4cb01482d   hello-world     &quot;/hello&quot;       41 minutes ago   Exited (0) 41 minutes ago             vibrant_bell</code></pre></div><p>Notice that containers have a <em>CONTAINER ID</em> and <em>NAME</em>. The names are currently autogenerated. When we have a lot of different containers, we can use the option<code class=\"language-text\">--filter</code> or pipe to <code class=\"language-text\">grep</code> (or another similar utility) to filter the list.</p><p>Let's start with <code class=\"language-text\">--filter</code> - you can see the possible filters from <a href=\"https://docs.docker.com/engine/reference/commandline/ps/#filtering\" target=\"_blank\" rel=\"noopener noreferrer\">https://docs.docker.com/engine/reference/commandline/ps/#filtering</a> - and you may notice that the filters are under <code class=\"language-text\">ps</code> which is the historical shorthand for <code class=\"language-text\">container ls</code> which is confusing. More on the shorthands later.</p><p>Anyway, by specifying <code class=\"language-text\">--filter ancestor=hello-world</code> we'll list all the containers that share <code class=\"language-text\">hello-world</code> as an <em>ancestor</em>:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">docker container ls -a --filter ancestor=hello-world</code></pre></div></exercise><text-box variant='learningObjectives' name='just use grep (or windows equivalent)'><p>But going forward it's probably easier to just use <code class=\"language-text\">grep</code> than remember these non-intuitive filter options.</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">docker container ls -a | grep hello-world</code></pre></div></text-box><exercise name='docker container rm for real'><p>Let's remove the container with <code class=\"language-text\">docker container rm</code> command. It accepts a container's name or ID as its arguments.</p><p>Notice that the command also works with the first few characters of an ID. For example, if a container's ID is 3d4bab29dd67, you can use <code class=\"language-text\">docker container rm 3d</code> to delete it. Using the shorthand for the ID will not delete multiple containers, so if you have two IDs starting with 3d, a warning will be printed, and neither will be deleted.</p><p>You can also use multiple arguments: <code class=\"language-text\">docker container rm id1 id2 id3</code>. This is especially handy when combined with <code class=\"language-text\">xargs</code>, but before we can use <code class=\"language-text\">xargs</code> we need to list just the plain ids.</p><p>To list the plain ids docker uses <code class=\"language-text\">--quiet</code> or <code class=\"language-text\">-q</code> (which is not very <em>quiet</em>..).</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container ls -a -q\n  1cd4cb01482d\n  b7a53260b513</code></pre></div><p>If you already removed the containers and have no output, then you might want to run a couple of more:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container run hello-world\n...\n$ docker container run hello-world\n...</code></pre></div></exercise><text-box variant='learningObjectives' name='xargs (on Linux/Mac)'><p>Now this output is great for <code class=\"language-text\">xargs</code>! If you don't see any output, check that your have that <code class=\"language-text\">-a</code> in there as well.</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container ls -a -q | xargs docker container rm\n  1cd4cb01482d\n  b7a53260b513</code></pre></div><p><code class=\"language-text\">docker container rm</code> returns the ids it removed. If you run the command again it will not list any containers and therefore <code class=\"language-text\">xargs</code> does not run <code class=\"language-text\">docker container rm</code>, either</p></text-box><text-box variant='learningObjectives' name='prune'><p>If you have hundreds of stopped containers and you wish to delete them all, you should use <code class=\"language-text\">docker container prune</code>. Prune can also be used to remove \"dangling\" images with <code class=\"language-text\">docker image prune</code>. Dangling images are images that do not have a name and are not used. They can be created manually and are automatically generated during build. Removing them just saves some space.</p><p>And finally you can use <code class=\"language-text\">docker system prune</code> to clear almost everything. We aren't yet familiar with the exceptions that <code class=\"language-text\">docker system prune</code> does not remove.</p><p>After removing all of the <em>hello-world</em> containers, run <code class=\"language-text\">docker image rm hello-world</code> to delete the image. You can use <code class=\"language-text\">docker image ls</code> to confirm that the image is not listed.</p></text-box><exercise name='docker image pull'><p>You can also use the <code class=\"language-text\">image pull</code> command to download images without running them: <code class=\"language-text\">docker image pull hello-world</code></p></exercise><exercise name='docker image tag/version'><p>Let's try starting a new container <em>with</em> a version specified:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">docker container run nginx:1.15.7</code></pre></div><p>With some containers the command line appears to freeze after pulling and starting the container. This is because that particular container is now running in the current terminal, blocking the input. You can observe this with <code class=\"language-text\">docker container ls</code> from another terminal. In this situation one can exit by pressing <code class=\"language-text\">control + c</code> and try again with the <code class=\"language-text\">-d</code> flag.</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container run -d nginx:1.15.7\n  c7749cf989f61353c1d433466d9ed6c45458291106e8131391af972c287fb0e5</code></pre></div><p>The <code class=\"language-text\">-d</code> flag starts a container <em>detached</em>, meaning that it runs in the background. The container can be seen with</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container ls\n  CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES\n  c7749cf989f6        nginx               &quot;nginx -g &#39;daemon of…&quot;   35 seconds ago      Up 34 seconds       80/tcp              blissful_wright</code></pre></div><p>Now if we try to remove it, it will fail:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container rm blissful_wright\n  Error response from daemon: You cannot remove a running container c7749cf989f61353c1d433466d9ed6c45458291106e8131391af972c287fb0e5. Stop the container before attempting removal or force remove</code></pre></div><p>We should first stop the container using <code class=\"language-text\">docker container stop blissful_wright</code>, and then use <code class=\"language-text\">rm</code>.</p><p>Forcing is also a possibility and we can use <code class=\"language-text\">docker container rm --force blissful_wright</code> safely in this case. Again for both of them instead of name we could have used the ID or parts of it, e.g. <code class=\"language-text\">c77</code>.</p><p>It's common for the docker daemon to become clogged over time with old images and containers.</p><p>Now if we run the <code class=\"language-text\">nginx</code> image without specifying the version:</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker container run nginx\n  Unable to find image &#39;nginx:latest&#39; locally\n  latest: Pulling from library/nginx\n  dd6189d6fc13: Already exists\n  45b405c6807d: Already exists\n  0885cedf6b8e: Already exists\n  5ef23c5804a6: Already exists\n  31f35a1c1556: Already exists\n  2b1ef5bc2771: Already exists\n  Digest: sha256:943c25b4b66b332184d5ba6bb18234273551593016c0e0ae906bab111548239f\n  Status: Downloaded newer image for nginx:latest\n  /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration\n  /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/\n  /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh\n  10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf\n  10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf\n  /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh\n  /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh\n  /docker-entrypoint.sh: Configuration complete; ready for start up\n  2022/11/08 11:20:58 [notice] 1#1: using the &quot;epoll&quot; event method\n  2022/11/08 11:20:58 [notice] 1#1: nginx/1.23.2\n  2022/11/08 11:20:58 [notice] 1#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6)\n  2022/11/08 11:20:58 [notice] 1#1: OS: Linux 5.10.104-linuxkit\n  2022/11/08 11:20:58 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576\n  2022/11/08 11:20:58 [notice] 1#1: start worker processes\n  2022/11/08 11:20:58 [notice] 1#1: start worker process 32\n  2022/11/08 11:20:58 [notice] 1#1: start worker process 33\n  2022/11/08 11:20:58 [notice] 1#1: start worker process 34\n  2022/11/08 11:20:58 [notice] 1#1: start worker process 35</code></pre></div><p>We can see that it automatically adds <code class=\"language-text\">:latest</code> as the version, which is the image last built (not necessarily the latest version of nginx. More on this later.)</p><p>And the container doesn't seem to be as stuck as the one created from <code class=\"language-text\">nginx:1.15.7</code> because it outputs a bunch of logs. Actually, the container behavior is exactly the same in both <code class=\"language-text\">:latest</code> and <code class=\"language-text\">:1.15.7</code> - the level of output verbosity of <code class=\"language-text\">nginx</code> image was changed in 1.19.0 <a href=\"https://github.com/docker-library/docs/pull/1735/files\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/docker-library/docs/pull/1735/files</a> and our <code class=\"language-text\">:latest</code> is newer than that. However, we'll learn later why <code class=\"language-text\">:latest</code> might not be as <code class=\"language-text\">:latest</code> as you think.</p></exercise><text-box variant='learningObjectives' name='Most used commands'><table>\n<thead>\n<tr>\n<th>command</th>\n<th>explain</th>\n<th>shorthand</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">docker image ls</code></td>\n<td>Lists all images</td>\n<td><code class=\"language-text\">docker images</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">docker image rm &lt;image&gt;</code></td>\n<td>Removes an image</td>\n<td><code class=\"language-text\">docker rmi</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">docker image pull &lt;image&gt;</code></td>\n<td>Pulls image from a docker registry</td>\n<td><code class=\"language-text\">docker pull</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">docker container ls -a</code></td>\n<td>Lists all containers</td>\n<td><code class=\"language-text\">docker ps -a</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">docker container run &lt;image&gt;</code></td>\n<td>Runs a container from an image</td>\n<td><code class=\"language-text\">docker run</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">docker container rm &lt;container&gt;</code></td>\n<td>Removes a container</td>\n<td><code class=\"language-text\">docker rm</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">docker container stop &lt;container&gt;</code></td>\n<td>Stops a container</td>\n<td><code class=\"language-text\">docker stop</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">docker container exec &lt;container&gt;</code></td>\n<td>Executes a command inside the container </td>\n<td><code class=\"language-text\">docker exec</code></td>\n</tr>\n</tbody>\n</table><div>For all of them container can be either the container id or the container name. Same for images. <b>In the future we may use the shorthands in the material.</b></div><p>Some of the shorthands are legacy version of doing the same thing. You can use either.</p></text-box><exercise name=\"Exercise 1.1: Getting started\"><p>Since we already did \"Hello, World!\" in the material let's do something else.</p><p>Start 3 containers from image that does not automatically exit, such as nginx, detached.</p><p>Stop 2 of the containers leaving 1 up.</p><p>Submit the output for <code class=\"language-text\">docker ps -a</code> which shows 2 stopped containers and one running.</p></exercise><text-box variant='learningObjectives' name='Mac/Windows only part 2'><p>While the user is not expected/required ever to go inside of this magical virtual machine, we, as brave container specialists can do so by using docker (huh).</p><p>Now just blindly copy/paste the following without thinking too much. It will make a lot more sense later.</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ docker run -it --rm --privileged --pid=host justincormack/nsenter1\n  Unable to find image &#39;justincormack/nsenter1:latest&#39; locally\n  latest: Pulling from justincormack/nsenter1\n  726619a9fa8c: Pull complete\n  Digest: sha256:e876f694a4cb6ff9e6861197ea3680fe2e3c5ab773a1e37ca1f13171f7f5798e\n  Status: Downloaded newer image for justincormack/nsenter1:latest\n/ #</code></pre></div><p>Then we can see how long the virtual machine has been running</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">/ # uptime\n 10:18:14 up 2 min,  load average: 0.02, 0.02, 0.00</code></pre></div><p>And what version of Linux we are running</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">/ # uname -a\n  Linux docker-desktop 5.15.49-linuxkit #1 SMP PREEMPT Tue Sep 13 07:51:32 UTC 2022 aarch64 Linux\n/ # cat /etc/os-release\n  PRETTY_NAME=&quot;Docker Desktop&quot;</code></pre></div><p>So, Docker Desktop ships with a virtual machine based on <a href=\"https://github.com/linuxkit/linuxkit\" target=\"_blank\" rel=\"noopener noreferrer\">LinuxKit</a>.</p><p>As the output above is from my Apple Silicon Mac, the architecture is <code class=\"language-text\">aarch64</code> (ARM) also for our magical Linux virtual machine. On a older Intel based Mac the architecture would be <code class=\"language-text\">x86</code>. More on these architecture implications later.</p></text-box><exercise name=\"Exercise 1.2: Cleanup\"><p>We've left containers and a image that won't be used anymore and are taking space, as <code class=\"language-text\">docker ps -as</code> and <code class=\"language-text\">docker images</code> will reveal.</p><p>Clean the docker daemon from all images and containers.</p><p>Submit the output for <code class=\"language-text\">docker ps -a</code> and <code class=\"language-text\">docker images</code></p></exercise><text-box variant='learningObjectives' name='How'><h2 id=\"links\" style=\"position:relative;\">Links<a href=\"#links\" aria-label=\"links permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><ul>\n<li>\n<p><a href=\"https://nickjanetakis.com/blog/understanding-how-the-docker-daemon-and-docker-cli-work-together\" target=\"_blank\" rel=\"noopener noreferrer\">Understanding how the docker daemon and docker cli work together.</a></p>\n</li>\n<li>\n<p><a href=\"https://cameronlonsdale.com/2018/11/26/whats-in-a-docker-image\" target=\"_blank\" rel=\"noopener noreferrer\">What is a Docker image?</a></p>\n</li>\n</ul></text-box></div>","frontmatter":{"path":"/part-1/1-getting-started","title":"Definitions and basic concepts"},"fileAbsolutePath":"/Users/mpa/dev/docker-hy/data/part-1/section-1.md"},"allPages":{"edges":[{"node":{"id":"948f83e9-b338-5b95-ae2d-a7c680eadb0c","frontmatter":{"path":"/frontmatter-guide","title":"Frontmatter-guide"}}},{"node":{"id":"fe138126-ea55-51b2-a071-8a7532aa51af","frontmatter":{"path":"/part-2","title":"Part 2"}}},{"node":{"id":"8147ba2c-1cbf-5878-b301-ef847e624e70","frontmatter":{"path":"/part-3/2-development","title":"Development with Docker"}}},{"node":{"id":"ed0e0aae-16de-5de9-8877-77337c24124f","frontmatter":{"path":"/part-3","title":"Part 3"}}},{"node":{"id":"1b7ed2f7-c954-577b-ac8d-cae5f2dfc838","frontmatter":{"path":"/part-2/2-docker-networking","title":"More Docker networking"}}},{"node":{"id":"3a0a776d-ec13-50e5-ade2-6c0d549f58ba","frontmatter":{"path":"/part-1","title":"Part 1"}}},{"node":{"id":"ad6b1fb2-b897-54c5-8ce5-00acf0c99caf","frontmatter":{"path":"/part-2/3-wordpress","title":"Wordpress"}}},{"node":{"id":"cea7278b-6d74-539e-b105-29dc780024b6","frontmatter":{"path":"/part-1/2-running-and-stopping","title":"Running and stopping containers"}}},{"node":{"id":"83f82958-678d-500e-8ce0-a2d587fed9c1","frontmatter":{"path":"/part-1/3-in-depth-dive-to-images","title":"In-depth dive to images"}}},{"node":{"id":"087c95a9-00b7-523d-bc13-85d227b71193","frontmatter":{"path":"/part-1/7-summary","title":"Summary"}}},{"node":{"id":"d3b909df-cb77-59a6-8402-f961bd2a7aff","frontmatter":{"path":"/part-1/5-volumes-and-ports","title":"Interacting with the container via volumes and ports"}}},{"node":{"id":"e8a51e48-cc89-5f08-8c00-2c3abe47d5a9","frontmatter":{"path":"/","title":"About this course"}}},{"node":{"id":"455aef79-d091-56bd-bace-e566c89238bb","frontmatter":{"path":"/part-1/1-getting-started","title":"Definitions and basic concepts"}}},{"node":{"id":"2b806816-8c59-5a3a-9b89-da8548d44e0a","frontmatter":{"path":"/part-1/4-defining-start-conditions","title":"Defining start conditions for the container"}}},{"node":{"id":"a3fe4972-edce-5bc7-9eb5-b355fac1ebf8","frontmatter":{"path":"/part-2/1-migrating-to-docker-compose","title":"Migrating to docker compose"}}},{"node":{"id":"3447594d-f3e4-56a2-8d83-12bf7ff5f3a4","frontmatter":{"path":"/part-3/1-using-non-root-user","title":"Using a non-root user"}}},{"node":{"id":"bc9490fd-c9f8-5a6a-8370-2ef946d4e3fa","frontmatter":{"path":"/part-3/4-extras","title":"Extras"}}},{"node":{"id":"67016067-426f-51cc-8ea0-3e16da657b13","frontmatter":{"path":"/part-3/3-multi-host-environments","title":"Multi-host environments"}}}]}},"pageContext":{}},"staticQueryHashes":["3294351120","994120085"]}